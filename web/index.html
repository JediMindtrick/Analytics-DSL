<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="./adl.css">
		<script type="text/javascript" src="./knockout.js"></script>
		<script type="text/javascript" src="./app.js"></script>
		<script type="text/javascript" src="./cellNav.js"></script>
		<script type="text/javascript" src="./viewModel.js"></script>
		<script type="text/javascript" src="./shortcut.js"></script>
		<script type="text/javascript" src="./jquery-2.0.0.min.js"></script>
		<script type="text/javascript" src="./program1.js"></script>
<!--		<script type="text/javascript" src="./program2.js"></script>-->
	</head>
	<body>
		<a href="https://github.com/JediMindtrick/Analytics-DSL">License & Github repo</a><br />
		Copyright &copy; 2013 by Brandon Wilhite
		<h1>Analytics DSL Editor</h1>
		<h2>Only tested in Chrome, ymmv.</h2>
		<select data-bind="options: programNames, value: currentProgramName"></select>
		<button data-bind="click: loadProgram">Load Program</button>
		<br />
		<label>Errors & Messages:</label>
		<input style="width:100%;" data-bind="enable: false, value: currentError" />
		<br>
		<label>f(x):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;focus on cell and [Enter] to edit a formula, [Ctrl+Enter] to update the formula in cell&gt;&gt;</label>
		<br>
		<textarea id="currentFormula" style="width:100%; height: 20px;" data-bind="value: currentFormula, hasFocus: isEditingFormula, css: { activeEditor: isEditingFormula }"></textarea>
	
<table class="tableone" style="height:500px;">
    <thead>
        <tr>
            <th style="width:176px;">Name</th>
            <th style="width:176px;">Value</th>
            <th style="width:176px;">Input</th>
            <th style="width:176px;">Result</th>
        </tr>
    </thead>
    <tbody>
	    <tr><td colspan="4" style="padding-top:0;">
	        <div class="innerb">
	            <table class="tabletwo">   
	            	<thead></thead>                   
	                <tbody data-bind="foreach: rows" >
	                    <tr data-bind="attr: { id: 'Row_' + Id }, css: { error: IsError }">
	                    	<!--
	                    <tr data-bind="attr: { id: 'Row_' + Id }, css: { error: IsError }, event: { mouseover: setCurrentError}">-->
	                        <td class="tdFIX">
	                            <input name="Name" type="text" data-bind="value: Name, event: {focus: setCurrentError}, click: selectCell" /></td>
	                        <td class="tdFIX">
	                        	<textarea style="height:15px;" name="Value" data-bind="value: Value, event: {focus: setCurrentError}, click: selectCell"></textarea>
	                            </td>
	                        <td class="tdFIX">
	                        	<input name="Input" data-bind="value: Input, disable: !$data.isInput(), event: {focus: setCurrentError}, click: selectCell" />
	                            </td>
	                        <td class="tdFIX">
	                        	<input name="Result" type="text" data-bind="value: Result, disable: true, event: {focus: setCurrentError}" />
	                        </td>
	                    </tr>
	                </tbody>
	            </table>
	        </div>
	    </td></tr>
	</tbody>
</table>

		<div style="width: 75%; height: 400px; margin-top: 50px;">
			<textarea style="width:100%; height:100%;"  data-bind="value: programCode, enable: currentProgramName() === 'Load From Text'" ></textarea>
		</div>
		
	</body>

		<script type="text/javascript">
			var vm = new ViewModel();

			ko.applyBindings(vm);
		</script>
</html>